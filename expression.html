<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expression Manager</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #fff;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        h2{
            margin: 0.5rem;
            font-size: 1rem;;
        }

        .container {
            display: flex;
            height: 100%;
            width: 100%;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            flex: 2; /* –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –∑–∞–Ω–∏–º–∞–µ—Ç –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞ */
            
        }

        .bottom-content {
            padding: 1rem;
            border-top: 1px solid #ddd;
            background-color: #f9f9f9;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            position: relative;
            height: 20%; /* –ù–∞—á–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ */
        }

        .resize-handle-horizontal {
            position: absolute;
            top: -5px;
            left: 0;
            right: 0;
            height: 10px;
            cursor: row-resize;
            background: transparent;
        }

        .side-content {
            padding: 0.3rem;
            border-left: 1px solid #ddd;
            background-color: #f9f9f9;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            position: relative;
            width: 20%; /* –ù–∞—á–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
        }

        .resize-handle-vertical {
            position: absolute;
            top: 0;
            left: -5px;
            bottom: 0;
            width: 10px;
            cursor: col-resize;
            background: transparent;
        }

        .box {
            flex: 1;
            display: flex;
            flex-direction: column;
            margin-bottom: 1rem;
        }

        textarea {
            flex: 1;
            width: 97%;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 1rem;
            font-size: 1rem;
            outline: none;
            resize: none;
            margin: 0;
        }

        textarea:focus {
            border-color: #6666CC;
            box-shadow: 0 0 5px rgba(0, 58, 120, 0.5);
        }

        #resultOutput {
            padding: 1rem;
            font-size: 1rem;
            font-family: 'Courier New', Courier, monospace;
            background-color: #f9f9f9;
            overflow-y: auto;
            height: 10vh;
        }

        .instrumentcont {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0rem;
        }

        button {
            background: #fff;
            color: #000000;
            border: none;
            padding: 0.1rem 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s, transform 0.2s;
        }

        button:hover {
            background-color: #b6b6b6;
            transform: scale(1.05);
        }

        button:active {
            transform: scale(1);
        }

    

        .saved-expression {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        

        .saved-expression span {
            word-break: break-word;
            white-space: pre-wrap;
            max-height: 3.5rem; /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã */
            overflow: hidden;
            text-overflow: ellipsis;
            display: inline-block;
        }


        .saved-expression button {
            background: #fff;
            color: #fff;
            border: none;
            margin-left: auto;
            border-radius: 5px;
            padding: 0.5rem;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .saved-expression button:hover {
            background: #b6b6b6;
        }

        #savedExpressions {
            flex: 1;
            overflow-y: auto;
        }

        #savedExpressions::-webkit-scrollbar {
            width: 5px;
        }

        #savedExpressions::-webkit-scrollbar-thumb {
            background: #ddd;
            border-radius: 5px;
        }

        #savedExpressions::-webkit-scrollbar-thumb:hover {
            background: #bbb;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-content">
            <!-- Input Section -->
            <div class="box">
                <!-- –ü–æ–ª–µ –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ -->
                
                <div class="instrumentcont">
                    <button onclick="runExpression()">üü¢</button>
                    <button onclick="saveExpression()">üíæ</button>
                    <button onclick="toggleVisibility('resultBox')">Result</button>
                    <button onclick="toggleVisibility('savedBox')">Saved</button>
                </div>
                <input type="text" id="fileNameInput" placeholder="Enter file name..." maxlength="50">
                <textarea id="expressionInput" placeholder="Enter your expression here..."></textarea>
                <div class="bottom-content" id="resultBox">
                    <div class="resize-handle-horizontal" id="resizeHorizontal"></div>
                    <div id="resultOutput" readonly></div>
                </div>
            </div>
        </div>

        <!-- Saved Expressions -->
        <div class="side-content" id="savedBox">
            <div class="resize-handle-vertical" id="resizeVertical"></div>
            <h2>Saved Files</h2>
            <div id="savedExpressions"></div>
        </div>
    </div>

    <script>
        //–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø–æ–ª–µ–π Save –∏ –ö—É—ã–≥–¥–µ
        const bottomContent = document.getElementById('resultBox');
        const resizeHorizontal = document.getElementById('resizeHorizontal');
        const sideContent = document.getElementById('savedBox');
        const resizeVertical = document.getElementById('resizeVertical');

        let isResizingHorizontal = false;
        let isResizingVertical = false;

        //–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ up/down
        resizeHorizontal.addEventListener('mousedown', (e) => {
            isResizingHorizontal = true;
            document.body.style.cursor = 'row-resize';
            document.addEventListener('mousemove', resizeBottomContent);
            document.addEventListener('mouseup', stopResizingHorizontal);
        });

        function resizeBottomContent(e) {
            if (!isResizingHorizontal) return;
            const containerRect = bottomContent.parentElement.getBoundingClientRect();
            const newHeight = containerRect.bottom - e.clientY;
            bottomContent.style.height = `${newHeight}px`;
        }

        function stopResizingHorizontal() {
            isResizingHorizontal = false;
            document.body.style.cursor = 'default';
            document.removeEventListener('mousemove', resizeBottomContent);
            document.removeEventListener('mouseup', stopResizingHorizontal);
        }

        // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ left/right
        resizeVertical.addEventListener('mousedown', (e) => {
            isResizingVertical = true;
            document.body.style.cursor = 'col-resize';
            document.addEventListener('mousemove', resizeSideContent);
            document.addEventListener('mouseup', stopResizingVertical);
        });

        function resizeSideContent(e) {
            if (!isResizingVertical) return;
            const containerRect = sideContent.parentElement.getBoundingClientRect();
            const newWidth = containerRect.right - e.clientX;
            sideContent.style.width = `${newWidth}px`;
        }

        function stopResizingVertical() {
            isResizingVertical = false;
            document.body.style.cursor = 'default';
            document.removeEventListener('mousemove', resizeSideContent);
            document.removeEventListener('mouseup', stopResizingVertical);
        }

        //
        const savedExpressions = [];
        let editIndex = null; // –£–∫–∞–∑–∞—Ç–µ–ª—å –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞

        //–ó–∞–ø—É—Å–∫ —Ñ–∞–π–ª–∞
        function runExpression(expression = null) {
            const resultOutput = document.getElementById("resultOutput");
            try {
                const input = expression || document.getElementById("expressionInput").value;
                const result = eval(input);
                resultOutput.textContent = `${result}`;
            } catch (error) {
                resultOutput.textContent = `Error: ${error.message}`;
            }
        }

        //–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
        function saveExpression() {
            const fileNameInput = document.getElementById("fileNameInput").value.trim();
            const expressionInput = document.getElementById("expressionInput").value.trim();
            const timestamp = new Date().toLocaleString(); 
            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            if (fileNameInput === "") {
                alert("File name cannot be empty.");
                return;
            }

            if (expressionInput === "") {
                alert("Expression cannot be empty.");
                return;
            }

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞
            if (editIndex !== null) {
                savedExpressions[editIndex] = { name: fileNameInput, expression: expressionInput, timestamp };
                editIndex = null; // –°–±—Ä–æ—Å –∏–Ω–¥–µ–∫—Å–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            } else {
                savedExpressions.push({ name: fileNameInput, expression: expressionInput, timestamp });
            }

            updateSavedExpressions();

            // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
            document.getElementById("fileNameInput").value = "";
            document.getElementById("expressionInput").value = "";
        }

        //–í—ã–≤–æ–¥ –≤ –ø–æ–ª–µ Save Files —ç–ª–µ–º–µ–Ω—Ç–∞
        function updateSavedExpressions() {
            const container = document.getElementById("savedExpressions");
            container.innerHTML = ""; 
            savedExpressions.forEach((item, index) => {
                const div0 = document.createElement("div");
    
                const div = document.createElement("div");
                div.className = "saved-expression";

                div0.className = "saved-expression1";
                div0.style.flexDirection = "column";
                div0.style.border = "none";
                div0.style.alignItems = "left";
                const nameSpan = document.createElement("span");
                nameSpan.textContent = item.name;

                const timestampDiv = document.createElement("div");
                timestampDiv.style.fontSize = "0.8rem";
                timestampDiv.style.color = "#666";
                timestampDiv.style.marginTop = "0.5rem"; 
                timestampDiv.textContent = item.timestamp;

                const div1 = document.createElement("div");
 

                const editButton = document.createElement("button");
                editButton.textContent = "‚úèÔ∏è";
                editButton.onclick = () => editExpression(index);

                const deleteButton = document.createElement("button");
                deleteButton.textContent = "üóëÔ∏è";
                deleteButton.onclick = () => deleteExpression(index);

                div0.appendChild(nameSpan); 
                div0.appendChild(timestampDiv); 
                div1.appendChild(editButton); 
                div1.appendChild(deleteButton);
                div.appendChild(div0);
                div.appendChild(div1);
                container.appendChild(div);
            });
        }

        //–ö–Ω–æ–ø–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        function editExpression(index) {
            const item = savedExpressions[index];
            document.getElementById("fileNameInput").value = item.name;
            document.getElementById("expressionInput").value = item.expression;
            editIndex = index; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–Ω–¥–µ–∫—Å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
        }

        //–ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞
        function deleteExpression(index) {
            savedExpressions.splice(index, 1);
            updateSavedExpressions();
        }

        function toggleVisibility(sectionId) {
            const section = document.getElementById(sectionId);
            if (section.style.display === "none") {
                section.style.display = "flex";
            } else {
                section.style.display = "none";
            }
        }
    </script>
</body>
</html>
